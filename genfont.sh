#!/bin/sh
latin='0x2000-0x206F 0x2074 0x20AC 0x2212 0x2215 0xE0FF 0xEFFD 0xF000'
latin_ext='0x0100-0x024F 0x1E00-0x1EFF 0x20A0-0x20AB 0x20AD-0x20CF 0x2C60-0x2C7F 0xA720-0xA7FF 0x0000-0x00FF 0x0131 0x0152-0x0153 0x02C6 0x02DA 0x02DC'
cyrillic='0x0400-0x045F 0x0490-0x0491 0x04B0-0x04B1 0x2116'
cyrrilic_ext='0x0460-0x052F 0x20B4 0x2DE0-0x2DFF 0xA640-0xA69F'
greek='0x0370-0x03FF'

glyphigo=../glyphIgo/src/glyphIgo.py
charlistfile=/tmp/font-characters

echo > $charlistfile
for i in $latin $latin_ext $cyrillic $cyrrilic_ext; do
"$glyphigo" list -r "$i" -o- >> "$charlistfile"
done
fonts='fonts/FiraSans-BoldItalic.otf fonts/FiraSans-Bold.otf fonts/FiraSans-BookItalic.otf fonts/FiraSans-Book.otf'
for font in $fonts; do
    "$glyphigo" subset -f "$font" -p "$charlistfile" -o "${font%%.otf}-min.woff2" > /dev/null || echo fail
done
rm $charlistfile
